#!/usr/bin/env bash


cfg="@CMAKE_SOURCE_DIR@/Config/epnflpconfig.json"

export O2Transport="zeromq"

SAMPLER="InformationNode"
SAMPLER+=" --heartbeat 1000"
xterm -geometry 80x25+0+0 -hold -e @InformationNode_BINARY_DIR@/$SAMPLER &


FLP="flp"
FLP+=" --flp-config @CMAKE_SOURCE_DIR@/Config/flp-config.yaml"
xterm -geometry 80x25+500+0 -hold -e @FLP_BINARY_DIR@/$FLP &
xterm -geometry 80x25+500+0 -hold -e @FLP_BINARY_DIR@/$FLP &
xterm -geometry 80x25+500+0 -hold -e @FLP_BINARY_DIR@/$FLP &



EPN0="epn"
EPN0+=" --id epnReceiver1"
EPN0+=" --mq-config $cfg"
EPN0+=" --num-flps 3"
EPN0+=" --test-mode 1"
xterm -geometry 80x25+1000+0 -e @EPN_BINARY_DIR@/$EPN0 &

EPN1="epn"
EPN1+=" --id epnReceiver2"
EPN1+=" --mq-config $cfg"
EPN1+=" --num-flps 3"
EPN1+=" --test-mode 1"
xterm -geometry 80x25+1000+350 -hold -e @EPN_BINARY_DIR@/$EPN1 &

EPN2="epn"
EPN2+=" --id epnReceiver3"
EPN2+=" --mq-config $cfg"
EPN2+=" --num-flps 3"
EPN2+=" --test-mode 1"
xterm -geometry 80x25+1000+700  -e @EPN_BINARY_DIR@/$EPN2 &